<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏</title>
<style>
  * { box-sizing: border-box; margin:0; padding:0; }
  body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: linear-gradient(135deg, #e0e0e0, #f8f8f8);
    color: #222;
    text-align: center;
    transition: background 0.3s, color 0.3s;
    padding-top: 50px;
  }
  body.dark { background: linear-gradient(135deg,#1c1c1c,#333); color:#eee; }

  h1 { margin-bottom: 30px; }
  body.dark h1 { color: #fff; }

  table {
    border-collapse: collapse;
    margin: 20px auto;
    border-radius: 10px;
    overflow: hidden;
  }
  td {
    width: 90px; height: 90px;
    border: 2px solid #222;
    font-size: 42px; font-weight: bold;
    text-align: center; vertical-align: middle;
    cursor: pointer; background: #fff;
    transition: background 0.2s, transform 0.15s;
    user-select: none;
  }
  body.dark td { background: #555; color: #fff; border:2px solid #888; }
  td:hover { background: #f1f1f1; transform: scale(1.05); }
  td.win { background: #9effa3 !important; animation: glow 0.8s infinite alternate; }
  @keyframes glow { from { box-shadow: 0 0 8px #4caf50; } to { box-shadow: 0 0 16px #00e676; } }

  #menu, #joinDiv, #gameDiv {
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
    margin-top: 50px;
  }

  button, input {
    padding: 12px 24px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }
  button { background: #4caf50; color:#fff; }
  button:hover:not([disabled]) { background: #43a047; transform: scale(1.05); }
  button[disabled] { opacity:0.5; cursor: default; }
  input { border:2px solid #ccc; background:#fff; color:#333; }
  body.dark input { border:2px solid #888; background:#444; color:#fff; }

  #playAgainBtn { background: #2196f3; }
  #playAgainBtn:hover:not([disabled]) { background: #1976d2; }

  #themeToggle {
    position: fixed; top: 10px; right: 10px;
    width: 40px; height:40px;
    background: #ff9800; color:#fff;
    font-size:20px; line-height:40px;
    border-radius:50%; cursor:pointer;
  }
  body.dark #themeToggle { background:#ffc107; }

  @media (max-width:600px) {
    td { width:70px; height:70px; font-size:32px; }
    button, input { font-size:14px; padding:10px 18px; }
  }
</style>
</head>
<body>

<h1>–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏</h1>
<div id="themeToggle">üåì</div>

<div id="menu">
  <button id="singleDeviceBtn">–ò–≥—Ä–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</button>
</div>

<div id="gameDiv" style="display:none;">
  <p>–í—ã: <span id="playerSymbol"></span></p>
  <table id="board">
    <tr><td></td><td></td><td></td></tr>
    <tr><td></td><td></td><td></td></tr>
    <tr><td></td><td></td><td></td></tr>
  </table>
  <p>–•–æ–¥: <span id="turn"></span></p>
  <p id="result"></p>
  <button id="playAgainBtn" disabled>–ò–≥—Ä–∞—Ç—å –µ—â—ë</button>
</div>

<script>
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', ()=>document.body.classList.toggle('dark'));

const menu = document.getElementById('menu');
const singleDeviceBtn = document.getElementById('singleDeviceBtn');
const gameDiv = document.getElementById('gameDiv');
const cells = document.querySelectorAll('#board td');
const turnDisplay = document.getElementById('turn');
const resultDisplay = document.getElementById('result');
const playAgainBtn = document.getElementById('playAgainBtn');
const playerSymbolEl = document.getElementById('playerSymbol');

let board = ["","","","","","","","",""];
let currentPlayer = "X";
let gameOver = false;

function checkWinner(){
  const combos = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  for(let c of combos){
    const [a,b,c1]=c;
    if(board[a] && board[a]===board[b] && board[a]===board[c1]){
      return {winner:board[a], combo:c};
    }
  }
  if(board.every(cell=>cell)) return {winner:"draw"};
  return null;
}

function startGame(){
  menu.style.display='none';
  gameDiv.style.display='flex';
  playerSymbolEl.textContent = "X";
  currentPlayer = "X";
  board = ["","","","","","","","",""];
  gameOver=false;
  cells.forEach(td=>{td.textContent=""; td.classList.remove("win"); td.style.pointerEvents="auto";});
  turnDisplay.textContent = "–•–æ–¥ –∏–≥—Ä–æ–∫–∞ X";
  resultDisplay.textContent = "";
  playAgainBtn.disabled=false;
}

cells.forEach((cell,index)=>{
  cell.addEventListener('click', ()=>{
    if(gameOver || board[index]) return;
    board[index]=currentPlayer;
    cell.textContent=currentPlayer;
    const res = checkWinner();
    if(res){
      if(res.winner==="draw"){
        resultDisplay.textContent="–ù–∏—á—å—è!";
      }else{
        resultDisplay.textContent="–ü–æ–±–µ–¥–∏–ª: "+res.winner;
        if(res.combo) res.combo.forEach(i=>cells[i].classList.add("win"));
      }
      gameOver=true;
      cells.forEach(c=>c.style.pointerEvents="none");
      return;
    }
    currentPlayer = currentPlayer==="X"?"O":"X";
    turnDisplay.textContent="–•–æ–¥ –∏–≥—Ä–æ–∫–∞ "+currentPlayer;
  });
});

playAgainBtn.addEventListener('click', startGame);
singleDeviceBtn.addEventListener('click', startGame);
</script>

</body>
</html>
